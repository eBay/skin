.menu-button,
.fake-menu-button {
    line-height: normal;
    position: relative;

    &__menu {
        .dropdown;
        .dropdown-overlay-constraints;
    }
}

span.menu-button__button,
span.fake-menu-button__button {
    display: inline-block;
    vertical-align: bottom;
}

.fake-menu-button__menu {
    list-style-type: none;
    margin: 0;
    max-height: calc(50vh - 40px);
    overflow-y: auto;
    padding: 0;
}

div.menu-button__item[role^="menuitem"],
a.fake-menu-button__item,
button.fake-menu-button__item {
    .dropdown-option-base;
}

div.menu-button__item[role^="menuitem"] {
    cursor: default; // needed to override text cursor
}

.menu-button__item svg.icon,
.fake-menu-button__item svg.icon {
    .dropdown-status;
}

.menu-button__item svg.icon:last-child,
.fake-menu-button__item svg.icon:last-child,
.menu-button__item .badge {
    margin-left: 8px;
}

// anchor tag specific
a.fake-menu-button__item {
    color: @dropdown-fake-anchor-color;
    text-decoration: none;

    &:focus {
        text-decoration: underline;
    }

    &:hover,
    &:visited {
        color: @dropdown-fake-anchor-color;
    }
}

// button tag specific
button.fake-menu-button__item {
    background-color: @dropdown-fake-button-background-color;
    color: @dropdown-fake-button-color;
    font-family: inherit;
    text-align: left;
}

button.fake-menu-button__item:active svg.icon,
a.fake-menu-button__item:active svg.icon {
    color: @dropdown-item-active-status-color;
}

a.fake-menu-button__item[aria-current="page"] svg.icon,
button.fake-menu-button__item[aria-current="page"] svg.icon {
    opacity: 1;
}

div.menu-button__item[role^="menuitem"]:active svg.icon {
    color: @dropdown-item-active-status-color;
}

div.menu-button__item[role^="menuitem"][aria-checked="true"] svg.icon {
    opacity: 1;
}

a.fake-menu-button__item span,
button.fake-menu-button__item span,
div.menu-button__item[role^="menuitem"] span {
    .truncate;

    flex: 1 0 auto;
    width: 100%;
}

.menu-button__menu--scroll {
    overflow-y: scroll;
}

.menu-button__menu--fix-width,
.fake-menu-button__menu--fix-width {
    width: 100%;
}

.menu-button__menu--reverse,
.fake-menu-button__menu--reverse {
    right: 0;
}

.menu-button button.expand-btn--borderless,
.fake-menu-button button.expand-btn--borderless {
    background-color: transparent;
    border-color: transparent;
    padding-left: 0;
    vertical-align: initial;

    &:focus {
        outline: none;
        text-decoration: underline;
    }
}

.menu-button .expand-btn[aria-expanded="true"],
.fake-menu-button .expand-btn[aria-expanded="true"] {
    border-bottom-color: transparent;
}

// TODO: Remove below .expand-btn selectors and instead only rely on .menu-button__button.
.menu-button__button[aria-expanded="true"] ~ .menu-button__menu,
.fake-menu-button__button[aria-expanded="true"] ~ .fake-menu-button__menu,
.menu-button .expand-btn[aria-expanded="true"] ~ .menu-button__menu,
.fake-menu-button .expand-btn[aria-expanded="true"] ~ .fake-menu-button__menu {
    display: block;
}

// TODO: Remove below .expand-btn selectors and instead only rely on .menu-button__button.
.menu-button__button ~ .menu-button__menu--static,
.fake-menu-button__button ~ .fake-menu-button__menu--static,
.expand-btn ~ .menu-button__menu--static,
.expand_btn ~ .fake-menu-button__menu--static {
    position: static;
}

.menu button.expand-btn--borderless[aria-expanded="true"] ~ .menu-button__menu,
.fake-menu button.expand-btn--borderless[aria-expanded="true"] ~ .menu-button__menu {
    top: 41px; // button height plus one px, to meet design guidelines
}
