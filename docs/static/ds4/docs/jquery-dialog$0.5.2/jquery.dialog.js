!function(i){i.fn.dialogButton=function(o){return this.each(function(){var n=i(this),t=n.data("jquery-dialog-button-for"),a=i("#"+t);a.on("dialogClose",function(){n.focus()}),n.on("click",function(){a.dialog(o)})})},i.fn.dialog=function(o){return o=i.extend({},i.fn.dialog.defaults,o),this.each(function(){var n,t,a=i(this),e=a.data("jquery-dialog-transitions-enabled"),d=void 0===e?o.transitionsEnabled:e,r=i("body"),l=a.find(".dialog__header"),s=a.find(".dialog__body"),u=l.find("> h2"),f=a.find(".dialog__window"),c=l.find(".dialog__close, .dialog__back"),g=s.find(".dialog__form"),p=i('<input type="hidden" name="choice" />'),h=f.find("[autofocus]"),b=function(i){27===i.keyCode&&_(i)},y=function(){var i=this.value||this.innerText;p.attr("value",i)},m=function(o){o.preventDefault(),_(o,i(this).serializeArray())},v=function(){a.prop("hidden",!1),n=h.length>0?h:a.focusable(),0===n.length?f.attr("tabindex","-1").focus():n.first().focus(),i.trapScreenreader(a),i.trapKeyboard(a,{deactivateOnFocusExit:!1}),r.addClass("has-dialog"),a.on("keydown",b),a.trigger("dialogOpen")},_=function(o,n){g.off("click","[type=submit]",y),g.off("click","[type=button]",_),g.off("submit",m),c.off("click",_),a.off("keydown",b),p.remove(),i.untrapKeyboard(),i.untrapScreenreader(),r.removeClass("has-dialog"),!0===d?(window.clearTimeout(t),a.addClass("dialog--transition-out"),f.one("transitionend",function(){a.removeClass("dialog--transition-out"),a.prop("hidden",!0),a.trigger("dialogClose",[n])})):(a.prop("hidden",!0),a.trigger("dialogClose",[n]))};g.append(p),a.nextId("dialog"),u.nextId(a.prop("id")+"-title"),a.attr("aria-labelledby",u.prop("id")),a.attr("role","dialog"),g.on("click","[type=submit]",y),g.on("click","[type=button]",_),g.on("submit",m),c.on("click",_),!0===d?(window.clearTimeout(void 0),a.addClass("dialog--transition-in"),t=setTimeout(function(){v(),a.removeClass("dialog--transition-in")},16)):v()})}}(jQuery),$.fn.dialog.defaults={transitionsEnabled:!1,transitionOutDuration:0};